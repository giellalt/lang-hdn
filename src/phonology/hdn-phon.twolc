! =================================== !
!! !!!The Northern Haida morphophonological/twolc rules file 
! =================================== !

!! !!Alphabet
Alphabet
 a b c d e f g h i j k l m n o p q r s t u v w x y z æ ø å
 á é ó ú í à è ò ù ì ä ë ö ü ï â ê ô û î ã ý þ ñ ð ß ç ' .
 g̲ k̲ x̲

 A B C D E F G H I J K L M N O P Q R S T U V W X Y Z Æ Ø Å
 Á É Ó Ú Í À È Ò Ù Ì Ä Ë Ö Ü Ï Â Ê Ô Û Î Ã Ý þ Ñ Ð
 G̲ K̲ X̲
 %  ! this is a space
 %>:0 	!!= * @CODE@ affix boundary
 %^WS:0    !!= * @CODE@ white space dummy
 %^ENDA:0
 %^ENDB:0
 %^ENDC:0
 %^ENDD:0
 %^ENDE:0
 %^ENDF:0
 %^ENDG:0
 %^ENDH:0

;

!! !!Sets

Sets

 Vow = a e i o u y æ ø å  !!= * @CODE@
       á é ó ú í à è ò ù ì ä ë ö ü ï â ê ô û î ã  ; !!= @CODE@
 Cns = b c d f g h j k l m n p q r s t v w x z ð þ ' ç ý ñ ; !!= * @CODE@
 Orth = . ;
 Endings =  %^ENDA  %^ENDB  %^ENDC  %^ENDD  %^ENDE  %^ENDF  %^ENDG  %^ENDH ;
 Sgm = Vow Cns Orth   ; !!= * @CODE@

 
Definitions 

 WS = :* %^WS:0  :* ; 
  
!! !!Rules

Rules


!"Final s to j"
! rulename
! s:j <=> Vow _ %>: a ;

"h deletion in hl stems before long a, g"
! rulename
 h:0 <=> \:e _ l %>: [%^ENDB: | %^ENDC: ] ; ! áljahl:áljal skyáahl%>ga


! Please check the \:e restriction after CLASS-E.EHL-STEM has been merged in the
! same way as CLASS-AAHL-STEM - it might be that it isn't required - only now
! because of the multiple E.E stem entries.

"al to aal at the end of al" 
!! __@RULENAME@__ al changes to aal at the end of an AL stem verb when it is followed by an ending belonging to Set D or E
0:a <=> _ a h:0 l  %>: %^ENDC: [' | :á | :a ]  ; !áljahl:áljaal




!"w to u in gwaal"
! rulename
! w:u <=> _ a: a: l %>: a ;
!
!"a deletion in gwaal 1"
! rulename
! a:0 <=> w: _ a: l %>: a ;
!
!"a deletion in gwaal 2"
! rulename
! a:0 <=> w: a: _ l %>: a ;
!
!
!"Vowel harmony"
! rulename
! ä:a <=> _ %>: a ;
 
! Destressing

"Destressing rule"
!! __@RULENAME@__ - this should be a general rule, but we have problems of getting the variables to accept 0:Vow
Vx:Vy <=> [ á: | é: | í: | ó: | ú: ] Sgm:*  %>:  (Endings:) Sgm:* _  ;
          [ á: | é: | í: | ó: | ú: ] Sgm:* 0:Vow Vow: Cns:+  %>:  (Endings:) Sgm:* _  ; 
 	where Vx in ( á é í ó ú )
 	      Vy in ( a e i o u )
 	      matched ;

!"g deletion on the suffix border"
!g:0 <=> _ %>: g ;

!sdlaagwaal:sdlaagulaay